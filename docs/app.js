!function(i){function t(t){for(var s,n,h=t[0],d=t[1],l=t[2],c=0,p=[];c<h.length;c++)n=h[c],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&p.push(r[n][0]),r[n]=0;for(s in d)Object.prototype.hasOwnProperty.call(d,s)&&(i[s]=d[s]);for(a&&a(t);p.length;)p.shift()();return o.push.apply(o,l||[]),e()}function e(){for(var i,t=0;t<o.length;t++){for(var e=o[t],s=!0,h=1;h<e.length;h++){var d=e[h];0!==r[d]&&(s=!1)}s&&(o.splice(t--,1),i=n(n.s=e[0]))}return i}var s={},r={0:0},o=[];function n(t){if(s[t])return s[t].exports;var e=s[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}n.m=i,n.c=s,n.d=function(i,t,e){n.o(i,t)||Object.defineProperty(i,t,{enumerable:!0,get:e})},n.r=function(i){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},n.t=function(i,t){if(1&t&&(i=n(i)),8&t)return i;if(4&t&&"object"==typeof i&&i&&i.__esModule)return i;var e=Object.create(null);if(n.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:i}),2&t&&"string"!=typeof i)for(var s in i)n.d(e,s,function(t){return i[t]}.bind(null,s));return e},n.n=function(i){var t=i&&i.__esModule?function(){return i.default}:function(){return i};return n.d(t,"a",t),t},n.o=function(i,t){return Object.prototype.hasOwnProperty.call(i,t)},n.p="";var h=window.webpackJsonp=window.webpackJsonp||[],d=h.push.bind(h);h.push=t,h=h.slice();for(var l=0;l<h.length;l++)t(h[l]);var a=d;o.push([7,1]),e()}({6:function(i,t){function e(i){var t=new Error("Cannot find module '"+i+"'");throw t.code="MODULE_NOT_FOUND",t}e.keys=function(){return[]},e.resolve=e,i.exports=e,e.id=6},7:function(i,t,e){"use strict";e.r(t);var s=e(0),r=e.n(s);e(2);class o extends r.a.Scene{constructor(i){super("PlayScene"),this.config=i,this.bird=null,this.secondBird=null,this.thirdBird=null,this.pipes=null,this.pipeHorizontalDistance=0,this.pipeVerticalDistanceRange=[150,250],this.pipeHorizontalDistanceRange=[500,550],this.flapVelocity=250,this.globalFlag=!1,this.controller=null,this.simplePeer=null,this.scanned=!1,this.playerList=[]}preload(){this.load.image("sky","assets/sky.png"),this.load.image("bird","assets/bird.png"),this.load.image("pipe","assets/pipe.png")}create(){this.createBG(),this.createBird(),this.createSecondBird(),this.createThirdBird(),this.createPipes(),this.createColliders(),0==this.globalFlag&&(this.createCode(),this.globalFlag=!0)}update(){if(this.checkGameStatus(),this.recyclePipes(),1==this.scanned){var i=this.simplePeer.controllerList,t=Object.keys(this.simplePeer.controllerList).length;for(let e=0;e<t;e++)console.log(this.playerList[e].text),1==i[Object.keys(i)[e]].buttons.a&&0==e?this.bird.body.velocity.y=-this.flapVelocity:1==i[Object.keys(i)[e]].buttons.a&&1==e?this.secondBird.body.velocity.y=-this.flapVelocity:1==i[Object.keys(i)[e]].buttons.a&&2==e&&(this.thirdBird.body.velocity.y=-this.flapVelocity)}}createBG(){this.add.image(0,0,"sky").setOrigin(0,0)}createBird(){this.bird=this.physics.add.sprite(this.config.startPosition.x,this.config.startPosition.y,"bird").setOrigin(0),this.playerList.push(this.bird),this.bird.body.gravity.y=400,this.bird.setCollideWorldBounds(!0)}createSecondBird(){this.secondBird=this.physics.add.sprite(this.config.startPosition.x,this.config.startPosition.y+50,"bird").setOrigin(0),this.playerList.push(this.secondBird),this.secondBird.body.gravity.y=400,this.secondBird.setTint(255),this.secondBird.setCollideWorldBounds(!0)}createThirdBird(){this.thirdBird=this.physics.add.sprite(this.config.startPosition.x,this.config.startPosition.y-50,"bird").setOrigin(0),this.playerList.push(this.thirdBird),this.thirdBird.body.gravity.y=400,this.thirdBird.setTint(16711680),this.thirdBird.setCollideWorldBounds(!0)}createPipes(){this.pipes=this.physics.add.group();for(let i=0;i<4;i++){const i=this.pipes.create(0,0,"pipe").setImmovable(!0).setOrigin(0,1),t=this.pipes.create(0,0,"pipe").setImmovable(!0).setOrigin(0,0);this.placePipe(i,t)}this.pipes.setVelocityX(-200)}createColliders(){this.physics.add.collider(this.bird,this.pipes,this.invisibleBird,null,this),this.physics.add.collider(this.secondBird,this.pipes,this.invisibleSecondBird,null,this),this.physics.add.collider(this.thirdBird,this.pipes,this.invisibleThirdBird,null,this)}createCode(){this.simplePeer=new smartcontroller.NesSmartController,this.simplePeer.createQrCode("https://emmapoliakova.github.io/webpack-test/nesController.html","qrcode",150,150,"1");var i=this;this.simplePeer.on("connection",(function(t){this.controller=t,i.scanned=!0}))}movement(i,t){1==i.buttons.up&&-this.flapVelocity}checkGameStatus(){this.bird.getBounds().bottom>=this.config.height||this.bird.y<=0?this.bird.setVisible(!1):(this.secondBird.getBounds().bottom>=this.config.height||this.secondBird.y<=0)&&this.secondBird.setVisible(!1),(this.thirdBird.getBounds().bottom>=this.config.height-2||this.thirdBird.y<=0)&&this.thirdBird.setVisible(!1),0==this.secondBird.visible&&0==this.bird.visible&&0==this.thirdBird.visible&&this.gameOver()}placePipe(i,t){const e=this.getRightMostPipe(),s=r.a.Math.Between(...this.pipeVerticalDistanceRange),o=r.a.Math.Between(20,this.config.height-20-s),n=r.a.Math.Between(...this.pipeHorizontalDistanceRange);i.x=e+n,i.y=o,t.x=i.x,t.y=i.y+s}recyclePipes(){const i=[];this.pipes.getChildren().forEach((t=>{t.getBounds().right<=0&&(i.push(t),2===i.length&&this.placePipe(...i))}))}getRightMostPipe(){let i=0;return this.pipes.getChildren().forEach((function(t){i=Math.max(t.x,i)})),i}invisibleBird(){this.bird.setVisible(!1)}invisibleSecondBird(){this.secondBird.setVisible(!1)}invisibleThirdBird(){this.thirdBird.setVisible(!1)}gameOver(){this.physics.pause(),this.bird.setTint(15616036),this.secondBird.setTint(15616036),this.thirdBird.setTint(15616036),this.time.addEvent({delay:1e3,callback:()=>{this.scene.restart()},loop:!1})}flap(){this.bird.body.velocity.y=-this.flapVelocity}}var n=o;const h={width:800,height:600,startPosition:{x:80,y:300}},d={type:r.a.AUTO,...h,physics:{default:"arcade",arcade:{}},scene:[new n(h)]};new r.a.Game(d)}});
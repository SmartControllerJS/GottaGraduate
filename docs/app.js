!function(t){function i(i){for(var s,n,h=i[0],c=i[1],l=i[2],d=0,p=[];d<h.length;d++)n=h[d],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&p.push(r[n][0]),r[n]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);for(a&&a(i);p.length;)p.shift()();return o.push.apply(o,l||[]),e()}function e(){for(var t,i=0;i<o.length;i++){for(var e=o[i],s=!0,h=1;h<e.length;h++){var c=e[h];0!==r[c]&&(s=!1)}s&&(o.splice(i--,1),t=n(n.s=e[0]))}return t}var s={},r={0:0},o=[];function n(i){if(s[i])return s[i].exports;var e=s[i]={i:i,l:!1,exports:{}};return t[i].call(e.exports,e,e.exports,n),e.l=!0,e.exports}n.m=t,n.c=s,n.d=function(t,i,e){n.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:e})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,i){if(1&i&&(t=n(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(n.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var s in t)n.d(e,s,function(i){return t[i]}.bind(null,s));return e},n.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(i,"a",i),i},n.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},n.p="";var h=window.webpackJsonp=window.webpackJsonp||[],c=h.push.bind(h);h.push=i,h=h.slice();for(var l=0;l<h.length;l++)i(h[l]);var a=c;o.push([7,1]),e()}({6:function(t,i){function e(t){var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}e.keys=function(){return[]},e.resolve=e,t.exports=e,e.id=6},7:function(t,i,e){"use strict";e.r(i);var s=e(0),r=e.n(s);e(2);class o extends r.a.Scene{constructor(t){super("PlayScene"),this.config=t,this.bird=null,this.secondBird=null,this.thirdBird=null,this.pipes=null,this.pipeHorizontalDistance=0,this.pipeVerticalDistanceRange=[150,250],this.pipeHorizontalDistanceRange=[500,550],this.flapVelocity=250,this.globalFlag=!1,this.controller=null,this.simplePeer=null,this.scanned=!1,this.playerList=[],this.score=0,this.scoreText=""}preload(){this.load.image("sky","assets/sky.png"),this.load.image("bird","assets/bird.png"),this.load.image("pipe","assets/pipe.png")}create(){this.createBG(),this.createBird(),this.createSecondBird(),this.createThirdBird(),this.createScore(),this.createPipes(),this.createColliders(),0==this.globalFlag&&(this.createCode(),this.globalFlag=!0)}update(){if(this.checkGameStatus(),this.recyclePipes(),1==this.scanned){var t=this.simplePeer.controllerList,i=Object.keys(this.simplePeer.controllerList).length;for(let e=0;e<i;e++)console.log(this.playerList[e].text),1==t[Object.keys(t)[e]].buttons.a&&0==e?this.bird.body.velocity.y=-this.flapVelocity:1==t[Object.keys(t)[e]].buttons.a&&1==e?this.secondBird.body.velocity.y=-this.flapVelocity:1==t[Object.keys(t)[e]].buttons.a&&2==e&&(this.thirdBird.body.velocity.y=-this.flapVelocity)}}createBG(){this.add.image(0,0,"sky").setOrigin(0,0)}createBird(){this.bird=this.physics.add.sprite(this.config.startPosition.x,this.config.startPosition.y,"bird").setOrigin(0),this.playerList.push(this.bird),this.bird.body.gravity.y=400,this.bird.setCollideWorldBounds(!0)}createSecondBird(){this.secondBird=this.physics.add.sprite(this.config.startPosition.x,this.config.startPosition.y+50,"bird").setOrigin(0),this.playerList.push(this.secondBird),this.secondBird.body.gravity.y=400,this.secondBird.setTint(255),this.secondBird.setCollideWorldBounds(!0)}createThirdBird(){this.thirdBird=this.physics.add.sprite(this.config.startPosition.x,this.config.startPosition.y-50,"bird").setOrigin(0),this.playerList.push(this.thirdBird),this.thirdBird.body.gravity.y=400,this.thirdBird.setTint(16711680),this.thirdBird.setCollideWorldBounds(!0)}createPipes(){this.pipes=this.physics.add.group();for(let t=0;t<4;t++){const t=this.pipes.create(0,0,"pipe").setImmovable(!0).setOrigin(0,1),i=this.pipes.create(0,0,"pipe").setImmovable(!0).setOrigin(0,0);this.placePipe(t,i)}this.pipes.setVelocityX(-200)}createColliders(){this.physics.add.collider(this.bird,this.pipes,this.invisibleBird,null,this),this.physics.add.collider(this.secondBird,this.pipes,this.invisibleSecondBird,null,this),this.physics.add.collider(this.thirdBird,this.pipes,this.invisibleThirdBird,null,this)}createScore(){this.score=0;const t=localStorage.getItem("bestScore");this.scoreText=this.add.text(16,16,"Score: 0",{fontSize:"32px",fill:"#000"}),this.add.text(16,52,"Best score: "+(t||0),{fontSize:"18px",fill:"#000"})}createCode(){this.simplePeer=new smartcontroller.NesSmartController,this.simplePeer.createQrCode("https://emmapoliakova.github.io/webpack-test/nesController.html","qrcode",150,150,"1");var t=this;this.simplePeer.on("connection",(function(i){this.controller=i,t.scanned=!0}))}movement(t,i){1==t.buttons.up&&-this.flapVelocity}checkGameStatus(){this.bird.getBounds().bottom>=this.config.height||this.bird.y<=0?this.bird.setVisible(!1):(this.secondBird.getBounds().bottom>=this.config.height||this.secondBird.y<=0)&&this.secondBird.setVisible(!1),(this.thirdBird.getBounds().bottom>=this.config.height-2||this.thirdBird.y<=0)&&this.thirdBird.setVisible(!1),0==this.secondBird.visible&&0==this.bird.visible&&0==this.thirdBird.visible&&this.gameOver()}placePipe(t,i){const e=this.getRightMostPipe(),s=r.a.Math.Between(...this.pipeVerticalDistanceRange),o=r.a.Math.Between(20,this.config.height-20-s),n=r.a.Math.Between(...this.pipeHorizontalDistanceRange);t.x=e+n,t.y=o,i.x=t.x,i.y=t.y+s}recyclePipes(){const t=[];this.pipes.getChildren().forEach((i=>{i.getBounds().right<=0&&(t.push(i),2===t.length&&(this.placePipe(...t),this.increaseScore(),this.saveBestScore()))}))}getRightMostPipe(){let t=0;return this.pipes.getChildren().forEach((function(i){t=Math.max(i.x,t)})),t}invisibleBird(){this.bird.setVisible(!1)}invisibleSecondBird(){this.secondBird.setVisible(!1)}invisibleThirdBird(){this.thirdBird.setVisible(!1)}saveBestScore(){const t=localStorage.getItem("bestScore"),i=t&&parseInt(t,10);(!i||this.score>i)&&localStorage.setItem("bestScore",this.score)}gameOver(){this.physics.pause(),this.bird.setTint(15616036),this.secondBird.setTint(15616036),this.thirdBird.setTint(15616036),this.saveBestScore(),this.time.addEvent({delay:1e3,callback:()=>{this.scene.restart()},loop:!1})}flap(){this.bird.body.velocity.y=-this.flapVelocity}increaseScore(){this.score++,this.scoreText.setText("Score: "+this.score)}}var n=o;const h={width:800,height:600,startPosition:{x:80,y:300}},c={type:r.a.AUTO,...h,physics:{default:"arcade",arcade:{}},scene:[new n(h)]};new r.a.Game(c)}});